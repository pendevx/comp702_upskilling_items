# CSS

In the realm of CSS, there are two most important concepts to understand:
- the **Visual Formatting Model**, and
- the **CSS Style Computation Process**.

## The Box Model

Every element in the web page generates a "box". This box is a rectangular shape, with a *width* and a *height*.

Every box consists of four parts:
- A content box
- A padding box
- A border box
- A margin box

The content box contains the contents within the box. By default, changing the `width` and `height` properties in CSS will modify the dimensions of the content box, unless changed using `box-sizing`.

The padding box define the distance between the content box's edges and the border box. It is used to create *internal spacing* within the box. To change the dimensions of the padding box, you can use the CSS properties `padding-left`, `padding-right`, `padding-top`, and `padding-bottom` (or use a single property `padding` to control them all).

The border box defines the border of the box. It consists of three components:
- The border color
- The border width
- The border style

All the above may be applied differently to any four edges of the border box.

The margin box defines the distance between the box's outer margin edge and the outer margin edge of other boxes on the webpage. Compared to the padding box, the margin box is used to create *external spacing* for the box. The dimensions may be changed in a similar way to the padding.

## Containing Block

The containing block is a crucial concept within CSS, which defines the axis of a block's  layouting area. It also defines the value at which many positions and sizes are calculated against.

## Overflow

When the containing block cannot fit its actual content, the content may overflow. This is often caused by fixed dimensions for a specific box, without considering the dimensions of its children.

By default, overflowing content will be displayed to "run outside of" the box. However, the CSS property `overflow` may be used to change the behaviour of overflowing content.

- `overflow: hidden` hides all the overflowing content
- `overflow: scroll` generates a scroll bar for the hidden content
- `overflow: clip` functions similarly to `hidden`, except it will clip the overflowing content at a value specified in the `overflow-clip-margin` property.

## Layouts in CSS

Within a document, there may be three types of layouts:
1. The normal flow
2. Floats
3. Absolute positioning

The Normal Flow consists of two main areas:
- Block Formatting Contexts (BFC)
- Inline Formatting Contexts (IFC)

These formatting contexts the formatting rules of block boxes and inline boxes, and their child elements.

## The Visual Formatting Model

### The normal flow

The normal flow is also called the "document flow" or the "flow layout". It includes the block-level formatting of block boxes, inline-level formatting of inline boxes, and the relative and sticky positioning of block-level and inline-level boxes.

The normal flow occurs when the layout of such elements don't have their layouting mode affected or changed. A flow is the way that boxes on the page know and can affect each others' layouts. Once an element is taken *out of flow*, it works independently.

A special property of the normal flow is that vertical adjacent margins collapse to be the larger of the two. This happens when the two margins are contained within the same BFC, and happens regardless of whether the adjacent margins are siblings, or have a child-parent relationship.

### Floats

Float layouts was a popular way for horizontal alignment within web pages (CSS2), prior to the flexbox layout (introduced in CSS3).

The layout of floats are changed using the `float` property in CSS. The rules of float layouts are:
1. The left outer edge of a left-floating may not exceed the left edge of its containing block. A similar rules applies to right-floating elements.
2. All left-floating boxes must have its left outer edge on the right of the earlier left-floating box, else it must be below the earlier left-floating box. A similar rule applies to right-floating elements.
3. The right outer edge of a left-floating box may not be to the right of the left outer edge of any right-floating box next to it. A similar rule applies to right-floating elements.
4. A floating box's outer top edge may not be higher than the top of its containing block. 
5. The outer top edge of a floating box may not be higher than the outer top of any block or floated box generated earlier within the same document.
6. The outer top edge of a floating box may not be higher than the top of any line box containing a box generated by an element earlier within the same document.
7. A left-floating element's right edge may not have its right edge sticking out of its containing block, unless it is already placed as far left as possible (does not have any left-floating elements on its left). A similar rule applies to right-floating elements.
8. A floating box must be placed as high as possible.
9. A left-floating box must be put as far left as possible, and a right-floating box must be placed as far right as possible. A higher position is preferred over one that is further to the left/right.

#### Clearing Floats

Clearing floats means to set a new position to which elements must be moved below (clearing) the preceding floating boxes.

The CSS `clear` property allows to clear floats. Its values can be either:
- `clear: none`: The default value, no clearing happens
- `clear: left`: Clear left-floating boxes
- `clear: right`: Clear right-floating boxes
- `clear: both`: Clear all floats

### Absolute Positioning

Absolute positioned boxes are explcitly offset with respect to its containing block. It is out of flow (removed from the normal flow), and does not impact the layouting of its sibling elements. 

Absolute positioned boxes establishes a new containing block for normal flow children and absolute positioned descendants. 

#### Fixed positioning - a special type of absolute positioning

Fixed positioning boxes behave identically to absolute positioned boxes, with a single exception: **the containing block is different**.

The containing block of fixed positioned boxes is set to always be the viewport, or its first ancestral element with the `transform` property.
